<ion-header>
  <ion-toolbar>
    <ion-row>
      <ion-icon size="large" name="arrow-back-outline" class="ion-margin-start" [routerLink]="['/auth/login']"
        routerDirection="back">
      </ion-icon>
      <ion-title>Registrazione</ion-title>
    </ion-row>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-row class="ion-margin-top ion-justify-content-center">
    <h1>Registrazione</h1>
  </ion-row>
  <ion-row class="ion-margin-top ion-justify-content-center">
    <div class="img-div">
      <input #imgInput type="file" accept="image/*" id="profileImage" hidden (input)="changeImage($event)" />
      <img [src]="user.imgUrl" />
      <ion-icon class="add-photo" size="large" name="camera" (click)="imgInput.click()"></ion-icon>
    </div>
  </ion-row>
  <ion-item-group class="ion-margin-top">
    <ion-row class="ion-margin-top ion-justify-content-center input-row">
      <ion-item>
        <ion-label position="stacked">Nome <span>*</span></ion-label>
        <ion-input [(ngModel)]="user.nome"></ion-input>
      </ion-item>
    </ion-row>
    <ion-row class="ion-margin-top ion-justify-content-center input-row">
      <ion-item>
        <ion-label position="stacked">Cognome <span>*</span></ion-label>
        <ion-input [(ngModel)]="user.cognome"></ion-input>
      </ion-item>
    </ion-row>
    <ion-row class="ion-margin-top ion-justify-content-center input-row">
      <ion-item>
        <ion-label position="stacked">Cellulare</ion-label>
        <ion-input inputmode="numeric" type="number" [(ngModel)]="user.cellulare"></ion-input>
      </ion-item>
    </ion-row>
    <ion-row class="ion-margin-top ion-justify-content-center input-row">
      <ion-item>
        <ion-label position="stacked">Email <span>*</span></ion-label>
        <ion-input type="email" [(ngModel)]="user.email"></ion-input>
      </ion-item>
    </ion-row>
    <ion-row class="ion-margin-top ion-justify-content-center input-row">
      <ion-item>
        <ion-label position="stacked">Password <span>*</span></ion-label>
        <ion-input autocomplete="off" type="password" [(ngModel)]="user.password"></ion-input>
      </ion-item>
    </ion-row>
    <ion-row class="ion-margin-top ion-justify-content-center input-row">
      <ion-item>
        <ion-label position="stacked">Conferma password <span>*</span></ion-label>
        <ion-input autocomplete="off" type="password" [(ngModel)]="confirmPassword"></ion-input>
      </ion-item>
    </ion-row>
    <ion-row class="ion-margin-top ion-justify-content-center input-row">
      <ion-item>
        <ion-label position="stacked">Data di nascita <span>*</span></ion-label>
        <ion-datetime displayFormat="DD/MM/YYYY" pickerFormat="DD/MM/YYYY" [(ngModel)]="user.dataNascita">
        </ion-datetime>
      </ion-item>
    </ion-row>
    <ion-row class="ion-margin-top ion-justify-content-center input-row autocomplete-div">
      <ion-item class="searchbar-container">
        <ion-label position="stacked">Localit√† <span>*</span></ion-label>
        <ion-input (ionFocus)="setIsLocationSelected(true)" (ionChange)="searchForAddress()" debounce="500"
          [(ngModel)]="autocompleteLocation.input"></ion-input>
      </ion-item>
      <ion-list class="places-autocomplete" [hidden]="autocompleteItems.length === 0 || !isLocationSelected">
        <ion-item *ngFor="let item of autocompleteItems" (click)="selectedPlace(item)">{{item.description}}
        </ion-item>
      </ion-list>
    </ion-row>
    <ion-row class="ion-margin-top ion-justify-content-center input-row autocomplete-div">
      <ion-item class="searchbar-container">
        <ion-label position="stacked">Indirizzo spedizione calendario <span>*</span></ion-label>
        <ion-input (ionFocus)="setIsLocationSelected(false)" (ionChange)="searchForAddress()" debounce="500"
          [(ngModel)]="autocompleteCalendar.input"></ion-input>
      </ion-item>
      <ion-list class="places-autocomplete" [hidden]="autocompleteItems.length === 0 || isLocationSelected">
        <ion-item *ngFor=" let item of autocompleteItems" (click)="selectedPlace(item)">{{item.description}}
        </ion-item>
      </ion-list>
    </ion-row>
    <ion-row class="ion-margin-top ion-justify-content-center input-row">
      <ion-item>
        <ion-label position="stacked">Professione</ion-label>
        <ion-input [(ngModel)]="user.professione"></ion-input>
      </ion-item>
    </ion-row>
    <ion-row class="ion-margin-top ion-justify-content-center input-row">
      <ion-item>
        <ion-label>Fatti Trovare</ion-label>
        <ion-toggle color="primary" [(ngModel)]="user.fattiTrovare"></ion-toggle>
      </ion-item>
    </ion-row>
    <ion-button class="ion-margin-top ion-justify-content-center button" expand="block" [disabled]="checkDisabled()"
      (click)="registerUser()">
      Registrati</ion-button>
  </ion-item-group>

</ion-content>